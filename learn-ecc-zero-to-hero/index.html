<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learn Elliptic Curve Cryptography</title>
  <link rel="stylesheet" href="style.css"> <!-- custom styles -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"> <!-- pico.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- github icoin -->
</head>
<body>
  <main>
    <div id="languageSwitcherContainer">
      <select id="languageSwitcher">
        <option value="en">ğŸ‡ºğŸ‡¸ English</option>
        <option value="pt">ğŸ‡§ğŸ‡· PortuguÃªs</option>
      </select>
    </div>
    
    <div id="welcome">
      <h1 data-i18n="welcome_title">ğŸ“š Learn Elliptic Curve Cryptography</h1>
      <p data-i18n="welcome_description">This interactive educational tool helps you understand the foundations of modern cryptography used in Bitcoin, Ethereum, and other blockchain platforms...</p>
    </div>

    <section id="keygen">
      <h2 data-i18n="keygen_title">ğŸ”‘ Key Generator</h2>
      <p data-i18n="keygen_description"><em>Every blockchain wallet starts here: a random private key...</em></p>

      <input id="privateKeyInput" type="text" placeholder="Private key (hex, 64 chars)" value="0000000000000000000000000000000000000000000000000000000000000001">
      <button data-i18n="keygen_generateBtn_label" id="generateBtn">Generate Address</button>

      <article>
        <h3 data-i18n="keygen_details">Key Details</h3>
        <p><strong data-i18n="keygen_private_key">Private Key:</strong><span id="privateKey"></span></p>
        <p><strong data-i18n="keygen_public_key">Public Key (Uncompressed):</strong> <span id="publicKey"></span></p>
        <p><strong>X:</strong> <span id="publicKeyX"></span></p>
        <p><strong>Y:</strong> <span id="publicKeyY"></span></p>
      </article>

      <article>
        <h3 data-i18n="keygen_addresses">Addresses</h3>
        <p><strong>Ethereum:</strong> <span id="ethAddress"></span></p>
        <p><strong>Bitcoin (P2PKH):</strong> <span id="btcLegacy"></span></p>
        <p><strong>Bitcoin (P2SH-P2WPKH):</strong> <span id="btcSegwit"></span></p>
      </article>
    </section>

    <section id="signing">
      <h2 data-i18n="signing_title">âœï¸ Message Signing (ECDSA)</h2>
      <p data-i18n="signing_description"><em>This section demonstrates how you can digitally sign a message...</em></p>
      <input id="signerPrivateKey" type="text" placeholder="Private key (hex, 64 chars)" value="0000000000000000000000000000000000000000000000000000000000000001">
      <input id="messageInput" type="text" placeholder="Message to sign"> <!-- Handle i18n into input placeholder -->
      <button data-i18n="signing_sign_btn_label" id="signBtn">Sign</button>
      <button data-i18n="signing_verify_btn_label" id="verifyBtn">Verify</button>
      <p><strong data-i18n="signing_signature_label">Signature:</strong> <span id="signatureOutput"></span></p>
      <p><strong data-i18n="signing_signature_result_label">Verification Result:</strong> <span id="verificationOutput"></span></p>
    </section>

    <section id="vanity">
      <h2 data-i18n="vanity_title">ğŸ¯ Vanity Address Generator</h2>
      <p data-i18n="vanity_description"><em>Vanity addresses are custom-looking blockchain addresses that start with chosen characters...</em></p>
  
      <input id="vanityPrefix" type="text" placeholder="Prefix (e.g. 0xdead or 1btc)">
      <button id="vanityBtn">Start</button>
      <button id="vanityStopBtn">Stop</button>
      <div id="vanityProgress">        
        <p><strong>Status:</strong> <span id="vanityStatus">stopped</span></p>
        <p><strong>Address:</strong> <span id="vanityAddress"></span></p>
        <p><strong>Private Key:</strong> <span id="vanityPrivateKey"></span></p>
        <p><strong>Attempts:</strong> <span id="vanityAttempts">0</span></p>
        <p><strong>Time:</strong> <span id="vanityElapsedTime">...</span></p>
      </div>
      <details>
        <summary>ğŸ“˜ What do prefixes mean?</summary>
        <ul>
          <li><strong>Ethereum (0x...)</strong>: 20-byte keccak256(pubkey)</li>
          <li><strong>P2PKH (1...)</strong>: Bitcoin legacy</li>
          <li><strong>P2SH (3...)</strong>: SegWit compat</li>
          <li><strong>bc1q...</strong>: Native SegWit</li>
          <li><strong>bc1p...</strong>: Taproot</li>
        </ul>
      </details>
    </section>


    <section id="ethTxBuilder">
      <h2>ğŸ§± Ethereum Transaction Builder</h2>
      <p><em>This tool helps you learn how Ethereum transactions are constructed, signed, and broadcasted. Choose between legacy or EIP-1559 style transactions, input values manually or automatically fetch them from an RPC endpoint.</em></p>

      <div class="grid">
        <label for="ethTxMode">Transaction Type</label>
        <select id="ethTxMode">
          <option value="legacy">Legacy</option>
          <option value="eip1559">EIP-1559</option>
        </select>

        <label for="ethTxKind">Transaction Kind</label>
        <select id="ethTxKind">
          <option value="transfer">Simple Transfer</option>
          <option value="contract-deploy">Contract Deployment</option>
          <option value="contract-call">Contract Call</option>
        </select>

        <label for="rpcUrl">RPC URL (optional for auto fill)</label>
        <input type="text" id="rpcUrl" placeholder="https://mainnet.infura.io/v3/...">

        <label for="senderAddress">Sender Address</label>
        <input type="text" id="senderAddress" placeholder="0x...">

        <label for="recipientAddress">Recipient / Contract Address</label>
        <input type="text" id="recipientAddress" placeholder="0x... or leave blank for contract deploy">

        <label for="valueEth">Value (ETH)</label>
        <input type="text" id="valueEth" placeholder="0.1">

        <label for="nonce">Nonce</label>
        <input type="number" id="nonce" placeholder="0">

        <label for="gasLimit">Gas Limit</label>
        <input type="number" id="gasLimit" placeholder="21000">

        <label for="gasPrice">Gas Price (wei)</label>
        <input type="text" id="gasPrice" placeholder="Only for legacy">

        <label for="maxFeePerGas">Max Fee Per Gas (wei)</label>
        <input type="text" id="maxFeePerGas" placeholder="Only for EIP-1559">

        <label for="maxPriorityFeePerGas">Max Priority Fee (wei)</label>
        <input type="text" id="maxPriorityFeePerGas" placeholder="Only for EIP-1559">

        <label for="data">Data (hex)</label>
        <textarea id="data" rows="2" placeholder="0x..."></textarea>
      </div>

      <div style="margin-top: 1rem;">
        <button id="autoFillTxParams">ğŸ” Fetch Nonce / Estimate Gas</button>
        <button id="buildUnsignedTx">ğŸ§± Build Transaction</button>
        <button id="signTransaction">âœï¸ Sign Transaction</button>
        <button id="broadcastTransaction">ğŸ“¡ Broadcast</button>
      </div>

      <article style="margin-top: 2rem;">
        <h4>ğŸ” Raw & Signed Details</h4>
        <p><strong>Unsigned TX (serialized):</strong> <code id="unsignedTx"></code></p>
        <p><strong>Hash to Sign:</strong> <code id="txHashToSign"></code></p>
        <p><strong>Signature (R, S, V):</strong> <code id="txSignature"></code></p>
        <p><strong>Signed TX:</strong> <code id="signedTx"></code></p>
        <p><strong>Broadcast Result:</strong> <span id="broadcastResult"></span></p>
      </article>
    </section>


    <section id="how-it-works">
      <h2 data-i18n="how_it_works_title">ğŸ§  How It Works</h2>
      <p>This section breaks down how each cryptographic operation is implemented under the hood. Whether you're new to blockchain or want to deepen your ECC understanding, these insights will help.</p>
      <ul>
        <li><strong>ğŸ”‘ Key Generation:</strong> Your private key is just a number between 1 and n-1. From it, a public key is derived using elliptic curve multiplication: <code>Q = k Ã— G</code>.</li>
        <li><strong>ğŸ“¬ Ethereum Address:</strong> Derived from the last 20 bytes of the keccak256 hash of the public key.</li>
        <li><strong>ğŸ’¸ Bitcoin Address:</strong> Derived using HASH160 (SHA256 + RIPEMD160), followed by Base58Check encoding.</li>
        <li><strong>âœï¸ Signing:</strong> A SHA256 hash of the message is signed using ECDSA, producing a signature pair <code>{ r, s }</code>.</li>
        <li><strong>âœ”ï¸ Verification:</strong> The signature is validated using the public key against the message hash.</li>
        <li><strong>ğŸ¯ Vanity Generator:</strong> Repeats key generation until an address starts with your desired prefix â€” a fun demo of computational effort!</li>
      </ul>
    </section>

    <section id="about">
      <h2 data-i18n="about_title">ğŸ“˜ About This Tool</h2>
      <p>This educational playground was built to teach developers, students, and crypto enthusiasts how elliptic curve cryptography powers blockchain security â€” especially on secp256k1, used by both Bitcoin and Ethereum. It's interactive, transparent, and designed to build your intuition.</p>
      <p>If you're learning, inspect the code, tweak parameters, and try unexpected inputs â€” it's a safe space to experiment with crypto fundamentals. ğŸš€</p>
    </section>
  </main>

  <footer>
    <p>Â© 2025 <strong>Learn ECC For Blockchains</strong></p>
  
    <p>
      <a href="https://github.com/gabrielmissio" target="_blank" style="color: #60a5fa; text-decoration: none; font-weight: 500;">
        <i class="fa fa-github"></i>
        View on GitHub
      </a>
    </p>
  </footer>

  <script type="module" src="./src/main.js"></script>
</body>
</html>
