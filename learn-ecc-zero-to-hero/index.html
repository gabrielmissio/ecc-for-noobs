<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learn Elliptic Curve Cryptography</title>
  <link rel="stylesheet" href="style.css"> <!-- custom styles -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"> <!-- pico.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- github icoin -->
</head>
<body>
  <main>
    <div id="languageSwitcherContainer">
      <select id="languageSwitcher">
        <option value="en">🇺🇸 English</option>
        <option value="pt">🇧🇷 Português</option>
      </select>
    </div>
    
    <div id="welcome">
      <h1 data-i18n="welcome_title">📚 Learn Elliptic Curve Cryptography</h1>
      <p data-i18n="welcome_description">This interactive educational tool helps you understand the foundations of modern cryptography used in Bitcoin, Ethereum, and other blockchain platforms...</p>
    </div>

    <section id="keygen">
      <h2 data-i18n="keygen_title">🔑 Key Generator</h2>
      <p data-i18n="keygen_description"><em>Every blockchain wallet starts here: a random private key...</em></p>

      <input id="privateKeyInput" type="text" placeholder="Private key (hex, 64 chars)" value="0000000000000000000000000000000000000000000000000000000000000001">
      <button data-i18n="keygen_generateBtn_label" id="generateBtn">Generate Address</button>

      <article>
        <h3 data-i18n="keygen_details">Key Details</h3>
        <p><strong data-i18n="keygen_private_key">Private Key:</strong><span id="privateKey"></span></p>
        <p><strong data-i18n="keygen_public_key">Public Key (Uncompressed):</strong> <span id="publicKey"></span></p>
        <p><strong>X:</strong> <span id="publicKeyX"></span></p>
        <p><strong>Y:</strong> <span id="publicKeyY"></span></p>
      </article>

      <article>
        <h3 data-i18n="keygen_addresses">Addresses</h3>
        <p><strong>Ethereum:</strong> <span id="ethAddress"></span></p>
        <p><strong>Bitcoin (P2PKH):</strong> <span id="btcLegacy"></span></p>
        <p><strong>Bitcoin (P2WPKH):</strong> <span id="btcSegwit"></span></p>
        <p><strong>Bitcoin (P2SH-P2WPKH):</strong> <span id="btcShSegwit"></span></p>
      </article>
    </section>

    <section id="signing">
      <h2 data-i18n="signing_title">✍️ Message Signing (ECDSA)</h2>
      <p data-i18n="signing_description"><em>This section demonstrates how you can digitally sign a message...</em></p>

      <input
        id="signerPrivateKey"
        type="text"
        data-i18n-placeholder="signing_private_key_placeholder"
        placeholder="Private key (hex, 64 chars)..."
        value="0000000000000000000000000000000000000000000000000000000000000001"
      />

      <input
        id="messageInput"
        type="text"
        data-i18n-placeholder="signing_message_to_sign_placeholder"
        placeholder="Message to sign..."
      />

      <button id="signBtn" data-i18n="signing_sign_btn_label">Sign</button>
      <button id="verifyBtn" data-i18n="signing_verify_btn_label">Verify</button>

      <p><strong data-i18n="signing_signature_label">Signature:</strong> <span id="signatureOutput"></span></p>
      <p><strong data-i18n="signing_signature_result_label">Verification Result:</strong> <span id="verificationOutput"></span></p>
    </section>

    <section id="vanity">
      <h2 data-i18n="vanity_title">🎯 Vanity Address Generator</h2>
      <p data-i18n="vanity_description"><em>Vanity addresses are custom-looking blockchain addresses...</em></p>

      <input
        id="vanityPrefix"
        type="text"
        data-i18n-placeholder="vanity_prefix_placeholder"
        placeholder="Prefix (e.g. 0xdead or 1btc)..."
      />

      <button id="vanityBtn" data-i18n="vanity_start_btn_label">Start</button>
      <button id="vanityStopBtn" data-i18n="vanity_stop_btn_label">Stop</button>

      <div id="vanityProgress">
        <p><strong data-i18n="vanity_status_label">Status:</strong> <span id="vanityStatus">stopped</span></p>
        <p><strong data-i18n="vanity_address_label">Address:</strong> <span id="vanityAddress">-</span></p>
        <p><strong data-i18n="vanity_private_key_label">Private Key:</strong> <span id="vanityPrivateKey">-</span></p>
        <p><strong data-i18n="vanity_attempts_label">Attempts:</strong> <span id="vanityAttempts">0</span></p>
        <p><strong data-i18n="vanity_time_label">Time:</strong> <span id="vanityElapsedTime">-</span></p>
      </div>

      <details>
        <summary data-i18n="vanity_prefix_help_title">📘 What do prefixes mean?</summary>
        <ul>
          <li><strong>Ethereum (0x...)</strong>: 20-byte keccak256(pubkey)</li>
          <li><strong>P2PKH (1...)</strong>: Bitcoin legacy</li>
          <li><strong>P2SH (3...)</strong>: SegWit compat</li>
          <li><strong>bc1q...</strong>: Native SegWit</li>
          <li><strong>bc1p...</strong>: Taproot</li>
        </ul>
      </details>
    </section>

    <section id="powSection">
      <h2 data-i18n="pow_title">⛏️ Proof of Work Simulator</h2>
      <p data-i18n="pow_description">
        <em>Learn how Proof of Work operates by simulating mining. Adjust the difficulty, input a message, and let your browser find a nonce that results in a hash starting with a target number of zeros.</em>
      </p>
    
      <div>
        <label for="powDifficulty" data-i18n="pow_difficulty_label">Difficulty (leading zeros)</label>
        <input
          type="number"
          id="powDifficulty"
          value="3"
          min="1"
          max="32"
        />
    
        <label for="powMessage" data-i18n="pow_message_label">Block Message / Data</label>
        <input
          type="text"
          id="powMessage"
          data-i18n-placeholder="pow_message_placeholder"
          placeholder="Hello, blockchain!..."
        />
      </div>
    
      <div style="margin-top: 1rem;">
        <button id="startPoW" data-i18n="pow_start_btn">⛏️ Start Mining</button>
        <button id="stopPoW" data-i18n="pow_stop_btn">🛑 Stop</button>
      </div>
    
      <article>
        <h4 data-i18n="pow_output_title">📦 Mining Output</h4>
        <p><strong data-i18n="pow_status_label">Status:</strong> <span id="powStatus">-</span></p>
        <p><strong data-i18n="pow_nonce_label">Nonce:</strong> <span id="powNonce">-</span></p>
        <!-- <p><strong data-i18n="pow_hash_label">Hash:</strong> <code id="powHash">-</code></p> -->
        <p><strong data-i18n="pow_hash_label">Hash:</strong> <span id="powHash">-</span></p>
        <p><strong data-i18n="pow_attempts_label">Attempts:</strong> <span id="powAttempts">0</span></p>
        <p><strong data-i18n="pow_elapsed_label">Time Elapsed:</strong> <span id="powElapsed">0s</span></p>
      </article>
    </section> 

    <section id="how-it-works">
      <h2 data-i18n="how_it_works_title">🧠 How It Works</h2>
      <p data-i18n="how_it_works_description">
        This section breaks down how each cryptographic operation is implemented under the hood...
      </p>
      <ul>
        <li data-i18n="how_it_works_keygen_html">
          <strong>🔑 Key Generation:</strong> Your private key is just a number between 1 and n-1. From it, a public key is derived using elliptic curve multiplication: <code>Q = k × G</code>.
        </li>
        <li data-i18n="how_it_works_eth_address_html">
          <strong>📬 Ethereum Address:</strong> Derived from the last 20 bytes of the keccak256 hash of the public key.
        </li>
        <li data-i18n="how_it_works_btc_address_html">
          <strong>💸 Bitcoin Address:</strong> Derived using HASH160 (SHA256 + RIPEMD160), followed by Base58Check encoding.
        </li>
        <li data-i18n="how_it_works_signing_html">
          <strong>✍️ Signing:</strong> A SHA256 hash of the message is signed using ECDSA, producing a signature pair <code>{ r, s }</code>.
        </li>
        <li data-i18n="how_it_works_verification_html">
          <strong>✔️ Verification:</strong> The signature is validated using the public key against the message hash.
        </li>
        <li data-i18n="how_it_works_vanity_html">
          <strong>🎯 Vanity Generator:</strong> Repeats key generation until an address starts with your desired prefix — a fun demo of computational effort!
        </li>
        <li data-i18n="how_it_works_pow_html">
          <strong>⛏️ Proof of Work:</strong> Repeatedly hashes the block data + nonce until a hash is found that begins with a target number of leading zeros.
        </li>
      </ul>
    </section>

    <section id="about">
      <h2 data-i18n="about_title">📘 About This Tool</h2>
      <p data-i18n="about_description1">
        This educational playground was built to teach developers, students, and crypto enthusiasts how elliptic curve cryptography powers blockchain security — especially on secp256k1, used by both Bitcoin and Ethereum...
      </p>
      <p data-i18n="about_description2">
        If you're learning, inspect the code, tweak parameters, and try unexpected inputs — it's a safe space to experiment with crypto fundamentals. 🚀
      </p>
    </section>
  </main>

  <footer>
    <p>© 2025 <strong>Learn ECC For Blockchains</strong></p>
  
    <p>
      <a href="https://github.com/gabrielmissio" target="_blank" style="color: #60a5fa; text-decoration: none; font-weight: 500;">
        <i class="fa fa-github"></i>
        View on GitHub
      </a>
    </p>
  </footer>

  <script type="module" src="./src/main.js"></script>
</body>
</html>
